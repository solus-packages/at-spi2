From 57a5d53629e2a367e2e44b003e4c73c73099c6f2 Mon Sep 17 00:00:00 2001
From: Joshua Strobl <joshua@stroblindustries.com>
Date: Sat, 21 Apr 2018 10:48:19 +0300
Subject: [PATCH 1/1] Use stateless XDG autostart dir. Enforce previous
 execdir+core path.

---
 bus/meson.build | 2 +-
 meson.build     | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/bus/meson.build b/bus/meson.build
index 909103c..3201cbc 100644
--- a/bus/meson.build
+++ b/bus/meson.build
@@ -5,7 +5,7 @@ accessibility_conf = configuration_data()
 accessibility_conf.set('DATADIR', atspi_datadir)
 
 busconfig_dir = join_paths(atspi_datadir, 'defaults/at-spi2')
-session_dir = join_paths(atspi_sysconfdir, 'xdg/autostart')
+session_dir = join_paths(atspi_datadir, 'xdg/autostart')
 
 configure_file(input: 'accessibility.conf.in',
                output: 'accessibility.conf',
diff --git a/meson.build b/meson.build
index 86e2a4a..5dba36e 100644
--- a/meson.build
+++ b/meson.build
@@ -25,7 +25,7 @@ registryd_inc = include_directories('registryd')
 
 atspi_prefix = get_option('prefix')
 atspi_datadir = join_paths(atspi_prefix, get_option('datadir'))
-atspi_libexecdir = join_paths(atspi_prefix, get_option('libexecdir'))
+atspi_libexecdir = join_paths(atspi_prefix, get_option('libexecdir'), 'core')
 atspi_sysconfdir = join_paths(atspi_prefix, get_option('sysconfdir'))
 atspi_libdir = join_paths(atspi_prefix, get_option('libdir'))
 atspi_includedir = join_paths(atspi_prefix, get_option('includedir'))
-- 
2.16.3

