From aeb0dbd6f15cd181ad7de77e3c5d19d86e211305 Mon Sep 17 00:00:00 2001
From: Joshua Strobl <joshua@stroblindustries.com>
Date: Sat, 13 Apr 2019 14:53:43 +0300
Subject: [PATCH 1/1] Use stateless XDG autostart dir. Enforce previous
 execdir+core path.

---
 bus/meson.build | 2 +-
 meson.build     | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/bus/meson.build b/bus/meson.build
index 5c7e03d..4afa7a3 100644
--- a/bus/meson.build
+++ b/bus/meson.build
@@ -5,7 +5,7 @@ accessibility_conf = configuration_data()
 accessibility_conf.set('DATADIR', atspi_datadir)
 
 busconfig_dir = join_paths(atspi_datadir, 'defaults/at-spi2')
-session_dir = join_paths(atspi_sysconfdir, 'xdg/autostart')
+session_dir = join_paths(atspi_datadir, 'xdg/autostart')
 
 configure_file(input: 'accessibility.conf.in',
                output: 'accessibility.conf',
diff --git a/meson.build b/meson.build
index 839afef..a431eb3 100644
--- a/meson.build
+++ b/meson.build
@@ -25,7 +25,7 @@ registryd_inc = include_directories('registryd')
 
 atspi_prefix = get_option('prefix')
 atspi_datadir = join_paths(atspi_prefix, get_option('datadir'))
-atspi_libexecdir = join_paths(atspi_prefix, get_option('libexecdir'))
+atspi_libexecdir = join_paths(atspi_prefix, get_option('libexecdir'), 'core')
 atspi_sysconfdir = join_paths(atspi_prefix, get_option('sysconfdir'))
 atspi_libdir = join_paths(atspi_prefix, get_option('libdir'))
 atspi_includedir = join_paths(atspi_prefix, get_option('includedir'))
-- 
2.21.0

